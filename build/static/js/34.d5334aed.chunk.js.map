{"version":3,"sources":["decorator/resizeMe.js","components/LazyLoad/LazyLoad.js","components/LazyLoad/index.js","components/WaterFall/index.js","components/WaterFall/WaterFall.js","routes/Widgets/Gallery/components/index.js"],"names":["debounce","$$","throttle","defaultConfig","refreshRate","refreshMode","resizeMe","config","arguments","length","undefined","refreshFunc","WrappedComponent","_PureComponent","_temp","props","_this","Object","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","onResize","element","parentNode","_getComputedStyle","getComputedStyle","width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","size","parseInt","setState","onResizeStrategy","state","position","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","key","value","resizeSensor","ResizeSensor","detach","_this2","_this$state","_this$props","className","otherProps","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","ref","node","style","assign","E_react_learn_react_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","PureComponent","LazyLoad","componentDidUpdate","lazySizes","hC","aC","nextProps","propsChanged","_arr","_i","propName","handleSrcSet","rC","dataSrcSet","isArray","join","src","e","target","classList","add","prefixCls","dataSizes","dataSrc","iframe","title","alt","objectWithoutProperties","classNames","cx","lazyProps","objectSpread","react_default","frameBorder","onError","Component","defaultProps","WaterFall","onLayoutComplete","items","onLayout","msnry","renderItem","dataSource","render","columnWidth","gutter","itemStyle","renderFunc","item","marginBottom","map","index","_this$props2","horizontalOrder","percentPosition","fitWidth","getInstance","Masonry","itemSelector","on","prevProps","prevState","isEqual","layout","off","destroy","_this$props3","classnames","Meta","Content","Gallery","visible","onPreview","onClose","self","document","addEventListener","_ref","water","layout_default","components_WaterFall","card_default","hoverable","cover","onClick","description","Mask","closable","margin","left","right","top","bottom","maxHeight"],"mappings":"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","file":"static/js/34.d5334aed.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport ResizeSensor from 'css-element-queries/src/ResizeSensor';\r\nimport $$ from 'cmn-utils';\r\nconst { debounce, throttle } = $$;\r\n\r\n/**\r\n * 在一个类上增加这个装饰器，可以监听组件的大小变化，\r\n * 被包装的类在porps中将注入组件的width和height，并且\r\n * 在上级函组件中可以使用onResize函数\r\n * @param {*} config\r\n */\r\nconst defaultConfig = {\r\n  refreshRate: 16, // 调用频率\r\n  refreshMode: 'throttle' // 使用函数，只能是节流或防抖函数[throttle | debounce]\r\n};\r\n\r\nconst resizeMe = (config = defaultConfig) => {\r\n  const refreshFunc = config.refreshMode === 'throttle' ? throttle : debounce;\r\n\r\n  return WrappedComponent => {\r\n    return class extends PureComponent {\r\n      constructor(props) {\r\n        super(props);\r\n        this.onResizeStrategy = refreshFunc(this.onResize, config.refreshRate);\r\n        this.state = {\r\n          width: undefined,\r\n          height: undefined,\r\n          position: undefined\r\n        };\r\n      }\r\n\r\n      componentDidMount() {\r\n        const element = this.element.parentNode;\r\n        this.resizeSensor = new ResizeSensor(element, this.onResizeStrategy);\r\n        this.onResizeStrategy();\r\n      }\r\n\r\n      componentWillUnmount() {\r\n        const element = this.element.parentNode;\r\n        this.resizeSensor.detach(element, this.onResizeStrategy);\r\n      }\r\n\r\n      onResize = () => {\r\n        if (!this.element) return;\r\n\r\n        const element = this.element.parentNode;\r\n        const { onResize } = this.props;\r\n        const {\r\n          width,\r\n          height,\r\n          paddingLeft,\r\n          paddingRight,\r\n          paddingTop,\r\n          paddingBottom\r\n        } = getComputedStyle(element);\r\n\r\n        const size = {\r\n          width:\r\n            parseInt(width, 10) -\r\n            parseInt(paddingLeft, 10) -\r\n            parseInt(paddingRight, 10),\r\n          height:\r\n            parseInt(height, 10) -\r\n            parseInt(paddingTop, 10) -\r\n            parseInt(paddingBottom, 10)\r\n        };\r\n        this.setState(size);\r\n\r\n        onResize && onResize(size);\r\n      };\r\n\r\n      render() {\r\n        const { width, height } = this.state;\r\n        const { className, ...otherProps } = this.props;\r\n        const styles = {\r\n          position: 'relative',\r\n          width: '100%',\r\n          height: '100%'\r\n        };\r\n        return (\r\n          <div\r\n            ref={node => (this.element = node)}\r\n            style={styles}\r\n            className={className}\r\n          >\r\n            {width && height ? (\r\n              <WrappedComponent {...otherProps} size={{ ...this.state }} />\r\n            ) : null}\r\n          </div>\r\n        );\r\n      }\r\n    };\r\n  };\r\n};\r\n\r\nexport default resizeMe;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport lazySizes from 'lazysizes';\r\nimport cx from 'classnames';\r\nimport $$ from 'cmn-utils';\r\nimport './style/index.less';\r\n\r\nclass LazyLoad extends Component {\r\n  static propTypes = {\r\n    src: PropTypes.string,\r\n    dataSizes: PropTypes.string,\r\n    dataSrc: PropTypes.string,\r\n    dataSrcSet: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\r\n    className: PropTypes.string,\r\n    iframe: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    src:\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\r\n    dataSizes: 'auto',\r\n    iframe: false,\r\n    prefixCls: 'antui-lazyload'\r\n  };\r\n\r\n  componentWillUpdate(nextProps) {\r\n    let propsChanged = false;\r\n    for (let propName of [\r\n      'src',\r\n      'dataSizes',\r\n      'dataSrc',\r\n      'dataSrcSet',\r\n      'className',\r\n      'iframe'\r\n    ]) {\r\n      let prop =\r\n        propName === 'dataSrcSet'\r\n          ? this.handleSrcSet(this.props[propName])\r\n          : this.props[propName];\r\n      let nextProp =\r\n        propName === 'dataSrcSet'\r\n          ? this.handleSrcSet(nextProps[propName])\r\n          : nextProps[propName];\r\n      if (prop !== nextProp) {\r\n        propsChanged = true;\r\n        break;\r\n      }\r\n    }\r\n    if (propsChanged && lazySizes) {\r\n      if (lazySizes.hC(this.node, 'lazyloaded')) {\r\n        lazySizes.rC(this.node, 'lazyloaded');\r\n      }\r\n    }\r\n  }\r\n\r\n  handleSrcSet(dataSrcSet) {\r\n    if ($$.isArray(dataSrcSet)) {\r\n      return dataSrcSet.join(',');\r\n    } else if (typeof dataSrcSet === 'string') {\r\n      return dataSrcSet;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  componentDidUpdate = () => {\r\n    if (!lazySizes) {\r\n      return;\r\n    }\r\n    if (\r\n      !lazySizes.hC(this.node, 'lazyloaded') &&\r\n      !lazySizes.hC(this.node, 'lazyload')\r\n    ) {\r\n      lazySizes.aC(this.node, 'lazyload');\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.node.src = '';\r\n  }\r\n\r\n  onError(e) {\r\n    e.target.classList.add('lazyerror');\r\n    e.target.src =\r\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      prefixCls,\r\n      src,\r\n      dataSizes,\r\n      dataSrc,\r\n      dataSrcSet,\r\n      className,\r\n      iframe,\r\n      title,\r\n      alt,\r\n      ...otherProps\r\n    } = this.props;\r\n\r\n    const classNames = cx(prefixCls, 'lazyload', className);\r\n\r\n    const lazyProps = { ...otherProps, src };\r\n    if (dataSrc) lazyProps['data-src'] = dataSrc;\r\n    if (dataSizes) lazyProps['data-sizes'] = dataSizes;\r\n    if (dataSrcSet) {\r\n      lazyProps['data-srcset'] = this.handleSrcSet(dataSrcSet);\r\n    }\r\n\r\n    if (iframe) {\r\n      return (\r\n        <iframe\r\n          ref={node => (this.node = node)}\r\n          className={classNames}\r\n          title={title}\r\n          frameBorder=\"0\"\r\n          {...lazyProps}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <img\r\n        ref={node => (this.node = node)}\r\n        className={classNames}\r\n        alt={alt}\r\n        onError={this.onError}\r\n        {...lazyProps}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default LazyLoad;\r\n","import LazyLoad from './LazyLoad';\r\n\r\nexport default LazyLoad;","import WaterFall from './WaterFall';\r\n\r\nexport default WaterFall;","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Masonry from 'masonry-layout';\r\nimport cx from 'classnames';\r\nimport resizeMe from '@/decorator/resizeMe';\r\nimport isEqual from 'react-fast-compare';\r\nimport './style/index.less';\r\n\r\n/**\r\n * 瀑布流组件\r\n */\r\n@resizeMe({ refreshRate: 50 })\r\nclass WaterFall extends PureComponent {\r\n  static propTypes = {\r\n    dataSource: PropTypes.array,\r\n    columnWidth: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    gutter: PropTypes.number,\r\n    horizontalOrder: PropTypes.bool,\r\n    percentPosition: PropTypes.bool,\r\n    fitWidth: PropTypes.bool\r\n  };\r\n  static defaultProps = {\r\n    prefixCls: 'antui-waterfall'\r\n  };\r\n\r\n  componentDidMount() {\r\n    const {\r\n      columnWidth,\r\n      gutter,\r\n      horizontalOrder,\r\n      percentPosition,\r\n      fitWidth,\r\n      getInstance\r\n    } = this.props;\r\n\r\n    this.msnry = new Masonry(this.node, {\r\n      itemSelector: '.antui-waterfall-item',\r\n      columnWidth:\r\n        typeof columnWidth === 'string' ? '.antui-waterfall-item' : columnWidth,\r\n      gutter,\r\n      horizontalOrder,\r\n      percentPosition,\r\n      fitWidth\r\n    });\r\n\r\n    this.msnry.on('layoutComplete', this.onLayoutComplete);\r\n\r\n    if (getInstance) getInstance(this.msnry);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (!isEqual(prevProps.size, this.props.size)) {\r\n      this.msnry.layout();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.msnry.off('layoutComplete', this.onLayoutComplete);\r\n    this.msnry.destroy();\r\n  }\r\n\r\n  onLayoutComplete = items => {\r\n    const { onLayout } = this.props;\r\n    onLayout && onLayout(items, this.msnry);\r\n  }\r\n\r\n  renderItem = dataSource => {\r\n    const { render, columnWidth, gutter, itemStyle } = this.props;\r\n    const renderFunc = render ? render : item => item;\r\n\r\n    const style = {\r\n      width: columnWidth\r\n    };\r\n    if (gutter) {\r\n      style.marginBottom = gutter;\r\n    }\r\n\r\n    return dataSource.map((item, index) => {\r\n      return (\r\n        <div\r\n          key={index}\r\n          className=\"antui-waterfall-item\"\r\n          style={{ ...style, ...itemStyle }}\r\n        >\r\n          {renderFunc(item, index)}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { prefixCls, className, dataSource, style } = this.props;\r\n    const classnames = cx(prefixCls, className);\r\n    return (\r\n      <div\r\n        ref={node => (this.node = node)}\r\n        className={classnames}\r\n        style={style}\r\n      >\r\n        {this.renderItem(dataSource)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WaterFall;\r\n","import React, { Component } from 'react';\r\nimport WaterFall from 'components/WaterFall';\r\nimport LazyLoad from 'components/LazyLoad';\r\nimport Mask from 'components/Mask';\r\nimport { Layout, Card } from 'antd';\r\nimport './index.less';\r\nconst { Meta } = Card;\r\nconst { Content } = Layout;\r\n\r\nclass Gallery extends Component {\r\n  state = {\r\n    dataSrc: '',\r\n    visible: false,\r\n    dataSource: [\r\n      'https://images.pexels.com/photos/39493/animals-cat-girl-happiness-39493.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/271955/pexels-photo-271955.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/22346/pexels-photo.jpg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/115011/cat-face-close-view-115011.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/46024/pexels-photo-46024.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/56857/animal-cat-kitten-funny-56857.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/156934/pexels-photo-156934.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/982865/pexels-photo-982865.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/69932/tabby-cat-close-up-portrait-69932.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/691583/pexels-photo-691583.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/80363/cat-balcony-surprised-look-80363.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/66292/cat-eyes-view-face-66292.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/1038914/pexels-photo-1038914.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/57416/cat-sweet-kitty-animals-57416.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/248280/pexels-photo-248280.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/1049758/pexels-photo-1049758.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/730896/pexels-photo-730896.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/257532/pexels-photo-257532.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/62640/pexels-photo-62640.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/38867/pexels-photo-38867.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/416160/pexels-photo-416160.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/774731/pexels-photo-774731.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/693651/pexels-photo-693651.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/39255/cat-favorite-relaxation-rest-39255.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/674577/pexels-photo-674577.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/70769/pexels-photo-70769.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/434033/pexels-photo-434033.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/735423/pexels-photo-735423.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/617278/pexels-photo-617278.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/326875/pexels-photo-326875.jpeg?auto=compress&cs=tinysrgb',\r\n      'https://images.pexels.com/photos/209037/pexels-photo-209037.jpeg?auto=compress&cs=tinysrgb'\r\n    ]\r\n  };\r\n\r\n  componentDidMount() {\r\n    const self = this;\r\n    document.addEventListener('lazybeforeunveil', ({ target }) => {\r\n      self.water.layout();\r\n    });\r\n  }\r\n\r\n  onPreview = item => {\r\n    this.setState({\r\n      dataSrc: item,\r\n      visible: true\r\n    });\r\n  };\r\n\r\n  onClose = () => {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { dataSource } = this.state;\r\n    return (\r\n      <Layout className=\"full-layout gallery-page\">\r\n        <Content>\r\n          <WaterFall\r\n            ref=\"waterFall\"\r\n            className=\"gallery-water-fall\"\r\n            dataSource={dataSource}\r\n            columnWidth={240}\r\n            fitWidth\r\n            gutter={16}\r\n            getInstance={water => (this.water = water)}\r\n            render={item => (\r\n              <Card\r\n                hoverable\r\n                cover={\r\n                  <LazyLoad\r\n                    dataSrc={item}\r\n                    onClick={e => this.onPreview(item)}\r\n                  />\r\n                }\r\n              >\r\n                <Meta\r\n                  title=\"Europe Street beat\"\r\n                  description=\"www.pexels.com/\"\r\n                />\r\n              </Card>\r\n            )}\r\n          />\r\n        </Content>\r\n        <Mask visible={this.state.visible} onClose={this.onClose} closable>\r\n          <img\r\n            src={this.state.dataSrc}\r\n            alt=\"\"\r\n            style={{\r\n              position: 'absolute',\r\n              margin: 'auto',\r\n              left: 0,\r\n              right: 0,\r\n              top: 0,\r\n              bottom: 0,\r\n              maxHeight: '80%',\r\n            }}\r\n          />\r\n        </Mask>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Gallery;\r\n"],"sourceRoot":""}